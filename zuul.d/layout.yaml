---
- project:
    templates:
      - tripleo-multinode-container-minimal-pipeline
      - openstack-python3-wallaby-jobs
      - tripleo-validations-molecule-jobs
      - release-notes-jobs-python3
    check:
      jobs:
        - openstack-tox-linters: &tripleo-linters
            nodeset: centos-8
        - openstack-tox-docs: &tripleo-docs
            files:
              - ^doc/.*
              - ^molecule-requirements.txt
              - ^requirements.txt
              - ^README.rst
        - tripleo-ci-centos-8-content-provider: &content-provider
            dependencies:
              - openstack-tox-linters
        - tripleo-ci-centos-8-scenario004-standalone: &scenario004
            vars: &vars_scen004
              consumer_job: true
              build_container_images: false
            dependencies: &deps
              - tripleo-ci-centos-8-content-provider
            files:
              - ^roles/ceph.*$
    gate:
      jobs:
        - openstack-tox-linters
        - openstack-tox-docs: *tripleo-docs
        - tripleo-ci-centos-8-content-provider: *content-provider
        - tripleo-ci-centos-8-scenario004-standalone: *scenario004

    promote:
      jobs:
        - promote-openstack-tox-docs: *tripleo-docs
