---
- hosts: undercloud
  gather_facts: false
  vars:
   metadata:
    name: Check if roles data doesn't include deprecated services
    description: |
      Validate that the custom roles_data.yaml provided in the upgrade prepare step doesn't have any deprecated services.
      This has been an issue among customers for a long time, which has been addressed by documentation.
      However, we should have some way to alert the user that the roles_data they provide has deprecated services
      before starting the upgrade procedure and getting an ugly error.
    groups:
     - pre-upgrade
    categories:
     - undercloud
    products:
     - tripleo
  roles:
   - deprecated_services
